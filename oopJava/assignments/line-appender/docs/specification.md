## цель
изучить инкапсуляцию хрупкого поведения

## задача
сделать maven проект - много модульный
добавлять построчно в текстовый файл строки из другого файла(ов)

## требования

1) программа должна добавлять строки из одного файла в конец другого (уточнение ниже)
2) программа должны корректно работать с учетом одновременного доступа к целевому файлу нескольких копий программ
   2.1) исходная строка и записываемая строка должны совпадать
   2.2) гарантировать что добавляемая строка в один момент времени исключает паралельную запись из другой копии программы

### структура
1) parent/
2)  api
3)  impl1
4)  impl2
5)  app

1 - общий модуль
2 - api - некий набор api интерфейсов, возможно одна штука
3,4 - разные реализации api
5 - программа (cli) использующая api


### целевой файл

в целевом файле каждая строка имеет определенный формат

[target_line_num] source_file_name:src_line_num src_line_text nl

target_line_num - номер строки в целевом файле
source_file_name - имя исходного файла
src_line_num - номер строки исходного файла
src_line_text - текст исходной строки без символа перевода строк
nl - символ(ы) перевода строки

1) внимательно прочтай и дай пример понимания на примере двух исходных файлов и одного целевого

src_1

```
файл1-строка1\n
файл1-строка2\n
файл1-строка3
```

src_2

```
файл2-строка1\n
файл2-строка2
```

target

```
1 file_1:3 "файл1-строка3"
4 file_1:1 "файл1-строка1" "\n"
5 file_2:2 "файл2-строка2"
3 file_2:1 "файл2-строка1" "\n"
2 file_1:2 "файл1-строка2" "\n"
```

требуется гарантировать порядок записи?
если да, то какие требования к порядку?

2) объясни как ты понял в чем "хрупкость" / ненадежность поведения
   хрупкость - запись в один файл из двух источников, целевой файл может быть заблокирован первым читателем, когда второй попытается записывать,
обращение к одному объекту - файловому дескриптору - из двух точек - если пишем из файла1, целевой заблокирован, файл2 сможет записать после снятия блокировки, нужна диспетчеризация

3) как сделать более надежное поведение
во время записи, блокировать доступ к файлу, попытки записи ставить в очередь
логировать попытки записи, удачи, сбои

4) перечисли несколько сценариев не надежного использования 
целевой файл заблокирован записью из одного из файлов-источников
целевой файл заблокирован третьим процессом, например, открыт в текстовом редакторе
закончилось место на диске
файла не существует
формат строки не соотвествует требованиям
аварийное завершение записи