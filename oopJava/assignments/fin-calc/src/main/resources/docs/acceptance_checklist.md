# Чек-лист для проекта fin-calc

## 1. Парсинг команд
- [ ] Команды из спецификации корректно парсятся, ошибки парсинга обрабатываются корректно ([src/test/java/command/parser/ParserTest.java](src/test/java/command/parser/ParserTest.java))
- [ ] Множество команд передано одной строкой - команды парсятся и выполняются последовательно

## 2. Выполнение исходных команд
- [ ] CLI принимает команды из stdin
- [ ] Команды обрабатываются последовательно
- [ ] Результаты выводятся в stdout

## 3. Результат выполнения команд
- [ ] Каждая команда возвращает результат
- [ ] Состояние системы отражается после каждой операции

## 4. Ошибки отображаются читаемо
- [ ] Сообщения об ошибках содержат понятный текст (содержат информативный текст, описывающий проблему в терминах пользователя, например "Недостаточно средств на счете 123e4567-e89b-12d3-a456-426614174000")
- [ ] Указывается тип ошибки (например, "Недостаточно средств")
- [ ] Указывается контекст ошибки (ID счета, сумма)
- [ ] Не отображаются внутренние стеки трейсы без необходимости (только если это критическая ошибка для отладки)
- [ ] Ошибки имеют коды или категории для автоматической обработки (например, "ERROR_INSUFFICIENT_FUNDS", "ERROR_ACCOUNT_NOT_FOUND")

## 5. Ошибки при недостатке средств обрабатываются
- [ ] При попытке снятия суммы превышающей баланс, выводится сообщение "Недостаточно средств"
- [ ] Система возвращает ошибку "Отказ в операции" в случае недостатка средств
- [ ] Состояние счета остается неизменным после ошибки (баланс счета не изменяется)

## 6. Счета создаются корректно
- [ ] При команде `open` создается новый счет
  - id открытого счета есть уникальное псевдослучайное значение типа UUID
  - баланс открытого счета = 0
- [ ] Счет добавляется в реестр счетов
- [ ] При повторном открытии существующего счета возвращается ошибка "Счет уже существует"

## 7. Переводы работают корректно
- [ ] Команда `transfer <from_id> <to_id> <amount>`
- [ ] Сумма `<amount>` списывается со счета отправителя `<from_id>`
  - списание выполняется операцией `withdraw`
  - зачисление выполняется операцией `deposit`
- [ ] Сумма `<amount>` зачисляется на счет получателя `<to_id>`
- [ ] Балансы счётов после операции точно соответствуют результату расчётов
- [ ] При недостатке средств на счете отправителя перевод не выполняется
- [ ] Перевод не возможен между одним и тем же счетом

## 8. Балансы обновляются правильно
- [ ] После депозита сумма на счете увеличивается на указанную сумму
- [ ] После снятия сумма на счете уменьшается на указанную сумму
- [ ] После перевода сумма снимается с одного счета и зачисляется на другой
- [ ] Балансы проверяются на корректность (не отрицательные значения)
  - [ ] Не выполняется списание со счета с балансом < 0
- [ ] Точность вычислений сохраняется (используется BigDecimal)

## 9. Состояние системы сохраняется между операциями
- [ ] Все открытые счета остаются в памяти между командами
- [ ] Балансы счетов сохраняются после каждой операции
- [ ] Счета не исчезают после выполнения команд
- [ ] При перезапуске приложения (в рамках одной сессии) состояние сохраняется
- [ ] Команды обрабатываются в правильном порядке (последовательно)

## 10. Строгая типизация типов операций
- [ ] Используется sealed interface `Operation` для типов операций
- [ ] Классы `Deposit`, `Withdrawal`, `Transfer` реализуют `Operation`
- [ ] Используется pattern matching для обработки разных типов операций
- [ ] Каждый тип операции имеет строго определенную сигнатуру

> TODO
## ххх. Строгая типизация результата выполнения операций
- [ ] 


## 11. Тестирование
- [x] Все юнит-тесты проходят ([src/test/java/command/parser/ParserTest.java](src/test/java/command/parser/ParserTest.java))
- [x] Интеграционные тесты покрывают основные сценарии ([src/test/java/account/system/AccountRegistryTest.java](src/test/java/account/system/AccountRegistryTest.java))
- [x] Тесты на граничные условия находятся в ([src/test/java/account/system/AccountRegistryTest.java](src/test/java/account/system/AccountRegistryTest.java))
- [x] Тесты на ошибочные ситуации находятся в ([src/test/java/account/system/AccountRegistryTest.java](src/test/java/account/system/AccountRegistryTest.java))

## 12. UML диаграммы представлены
- [ ] Класс-диаграмма: [src/main/resources/docs/uml/class-diagram-financial-entities.md](src/main/resources/docs/uml/class-diagram-financial-entities.md)
- [ ] Диаграмма состояний: [src/main/resources/docs/uml/state-diagram-financial-entities.md](src/main/resources/docs/uml/state-diagram-financial-entities.md)
- [ ] Термины и определения: [src/main/resources/docs/uml/terms-financial-entities.md](src/main/resources/docs/uml/terms-financial-entities.md)

## 13. Применение наследования на примере Amount
- [ ] Класс `Amount` наследуется от `BigDecimal`
- [ ] Конструкторы класса `Amount` валидируют входные значения
- [ ] Значение всегда больше нуля (строго положительное)
- [ ] Класс `Amount` предоставляет методы для математических операций
- [ ] Пример использования в [src/main/java/account/system/Amount.java](src/main/java/account/system/Amount.java)

## 14. Демонстрация
1. Запуск проекта:
```bash
mvn clean compile exec:java -Dexec.mainClass="account.system.cli.Main"
```

2. Пример выполнения команд:
```bash
open 123e4567-e89b-12d3-a456-426614174000
deposit 123e4567-e89b-12d3-a456-426614174000 100.50
balance 123e4567-e89b-12d3-a456-426614174000
transfer 123e4567-e89b-12d3-a456-426614174000 123e4567-e89b-12d3-a456-426614174001 50.25
close 123e4567-e89b-12d3-a456-426614174000
list
```

3. Запуск тестов:
```bash
mvn test
```