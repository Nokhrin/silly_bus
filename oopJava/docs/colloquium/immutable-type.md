# термин иммутабельный тип данных, чем подход иммутабельность лучше/хуже в практических смыслах,

мутабельность - источник сложности

тип, для носителей которого верно при t1<t2 что значение носителя в момент времени t1 равно значению в t2
значение - наблюдаемое состояние, не битовое представление, иммутабельность не определяет реализацию

иммутабельность достигается созданием нового экземпляра класса со значениями полей, ожидаемыми в результате функции 

примеры -
 иммутабельные - String, Integer
 
мутабельные
List<String>


достоинства
совместное использование, потокобезопасность - каждый вызов функции над значением порождает новый объект, потоки не могут обратиться к одному и тому объекту
параметризация чистых функций , lambda - иммутабельные типы гарантируют тип аргумента


недостатки 
аллокация памяти - результат функции - новый объект -> необходимо уничтожит ссылки на старый, нагрузка на gc 
снижение производительнгсти - копирование структур с большим количеством значений и ссылок, например, массивов 

неинтуитивность в некоторых предметных областях - в объекте счет при зачислении интуитивно видится изменение поля баланса существующего объекта, но не создание нового объекта с требуемым балансом

комбинации подоходов
типы обертки, содержащие мутабельные объекты, но не позволяющие изменять их - неизменяемый список

вопрос применения иммутабельных типов - вопрос компромисса между безопасностью и производительностью
если чтение выполняется за О(1), точно брать иммут
для О(n) - оценивать другие факторы

прагматика
делать все типы иммутабельными, при возникновении измеримой проблемы производительности - заманить мутабельным, если это решает проблему



вопросы 
иммутабельность типа - гарант чистоты функции?

к какому виду отнести объект иммутабельного типа, содержащий ссылки на мутабельные? неизменяемый список счетом, в счете можно изменить баланс
- поверхностная иммутабельность

если наоборот? список строк
- глубокая иммутабельность - 

продемонстрируй иммутабельную очередь

примеры в java - применять и не применять, техническая оцениваемая оправданность