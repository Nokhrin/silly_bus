# Абстрагирование
есть физический объект, в реальном мире

пример:
банкомат, "физический" объект, то есть, сущность, с которой напрямую взаимодействуют люди
с атрибутами id, владелец, даты, ...
со множеством допустимых операций - зачисление, списание ...
банкомат можно рассмотреть как собственность банка, как предмет интерьера, инструмент для управления балансом счета
каждое представление требует множество атрибутов из числа существующих, но не все:
для управления балансом пользователю не важен цвет и масса банкомата

абстракция
- оставление характеристрик, необходимых для решения задачи
- исключение невлияющего на решение поставленной задачи, упрощение
- создание черного ящика - знаем вводные, знаем результат, не грузим голову содержимым ящика



дана задача - управлять банковским счетом с помощью банкомата
банкомат как финансовая абстракция

пример:
банкомат для управления счетом - важны соединение с банком, устройства ввода/вывода, кассета с деньгами, доступность действий по аутентификации, внесению/снятию наличных, ...

контрпример:
банкомат как предмет интерьера - важны габариты, цвет... - иной набор характеристик, это другая абстракция, не подходит для решения поставленной задачи, но может быть создана для другой задачи



## Моделирование

| уровень <br/>абстрагирования | абстракция            | абстрагируемые понятия и свойства               | реализация в java        |
|------------------------------|-----------------------|-------------------------------------------------|--------------------------|
| 0                            | физический мир        | все возможные объекты и их поведения            | -                        |
| 1                            | структура модели      | свойства, необходимые и достаточные для задачи  | class V record           |           
| 2                            | контракт U требования | поведения, необходимые и достаточные для задачи | interface                |
| 3                            | объект в коде         | конкретная реализация контракта                 | Circle(), Square()       |
| 4                            | вызов                 | полиморфное обращение к базовому типу           | IShapeCalculator shape_1 |

полиморфизм применим в пределах созданной абстракции - предусмотрено то, что явно описано, т.е. контракт  
Добавление требования (абстракция требования - метода интерфейса)

### пример
[площадь фигур](../../concepts/src/main/java/org/example/polymorphism/shapes/ShapeMain.java)  
в задаче имеют значения величины, необходимые для расчета площади  
не имеют значения => не включаются в модель/класс: тип линии, размер точки, координаты центра фигуры

api-контракт: для получения площади фигуры типа Квадрат передай длину стороны  
пользователь: дан квадрат со стороной 5, верни площадь этого квадрата  
api-контракт: площадь квадрата со стороной 5

пользователя интересует результат - площадь фигуры;   
пользователя не интересует прочее, например, методика определения типа и выполнения расчета  



### контрпример - нарушение абстракции
нарушение в том, что клиент ожидает расчета периметра для любой фигуры
[интерфейс не предоставляет расчет периметра](../../concepts/src/main/java/org/example/polymorphism/shapes/IShapeCalculator.java)
реализация квадрата предоставляет

клиентский код содержит указание на подтип (Square), тогда как по идее полиморфизма достаточно базового типа для согласования типов
[площадь фигур](../../concepts/src/main/java/org/example/polymorphism/shapes/ShapeMain.java)

вопрос: должен ли периметр быть в интерфейсе/контракте?
ответ: зависит от требований / постановки задачи - абстрагирование включает в абстракцию необходимые и достаточные для решения задачи элементы структуры и поведения сущности

