
Полиморфизм и виртуальные функции, таблица виртуальных функций

связь ООП с системой типов

наследование - механизм структурного расширения типа - подтип содержит поля и методы надтипа, имеет возможность переопределять методы надтипа, добавлять собственные

полиморфизм - способность типа предоставлять множество реализаций, позволяющих единообразно обращаться к подтипам через их общий надтип

механизм extends
наследование(так как повторяет структуру надтипа) + полиморфизм(при наличии @overload)

implements
не является наследованием(не повторяет структуру)
реализует полиморфизм - определяет контракт поведения - единые методы для множества подтипов

generics
только полиморфизм средством параметров типов

наследование - одна из реализаций полиморфизма
наследование - это про ООП - механизм языка, полиморфизм - про теорию типов, смысловое свойство системы типов


полиморфизм проявляется в динамическом выборе реализации метода в runtime

вариант реализации динамического выбора - использование виртуальных таблиц
vtable


Полиморфизм и виртуальные функции, таблица виртуальных функций

виртуальная функция - метод, разрешаемый динамически в runtime на основе фактического типа объекта, а не типа переменной

ссылки на реализации виртуальных методов создает компилятор и помещает их в vtable создаваемую для каждого класса
это динамическое связывание
vtable применяется JVM при выполнении кода

class Animal {
    void speak() { System.out.println("..."); }
}
class Dog extends Animal {
    void speak() { System.out.println("Гав!"); }
}

Animal a = new Dog();
a.speak(); 

компилятор проверяет левую часть - а - animal, animal содержит speak - контракт соблбдается
JVM смотрит справа - фактически - экземпляр dog, вызывает метод dog.speak - выполняется работа по контракту

виртуальный метод позволяет вызвать желаемую реализацию, этот механизм выбора реализации естт  полиморфизм - подтиповый - в действии в jvm


вопросы
возможен ли полиморфизм без наследования?

на столе расположены чайник, мультиварка и кофемолка, все эти приборы могут работать пр подключении к электророзетке одного типа, например, евро розетка, 220В
примером какого понятия является это явление?

наследование всегда приводит к полиморфизму?
что произойдет с полиморфизмом , если исключить механизм виртуальных методов?

динамический тип возможен в системе со строгой типизацией?