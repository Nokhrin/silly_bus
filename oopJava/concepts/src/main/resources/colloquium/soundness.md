# Soundness / type safety система типов, протечка абстракций

soundness - статическая проверка пройдена, компиляция успешна, в runtime значения соблюдают контракт своих типов

нарушение soundness приводит к ошибке в runtime, ошибка связана с типом

Object[] arr = new String[2]
arr[0] = 1

скомпилится но упадет при динамической проверке, когда будет проверяться попытка записи

можно записать integer рефлексией, тогда ошибка будет при стен и из массива

динамическая составляющая сужает статический тип, поэтому проверка надтипа успешна, а реальный тип неизвестен при компиляции
переменная с типом список объектов ссылается на список строк - корректно
элементы списка будут созданы и добавлены при выполнении
если элемент окажется нестрокой - ошибка динамической проверки типа

источники ошибки
ковариантные массивы
стирание типов
raw types, Object[], рефлексия


протечка абстракций - свойство наблюдается, наблюдения не соответствуют спецификации

спецификация в java - абстрактные методы + аннотации

ситуация, когда класс реализует интерфейс формально корректно, но имеет детали реализации помимо контракта, о которых разработчик должен знать
List.get имеет разную алгоритмическую сложность для разных подтипов О(1) для массива, О(n) длясвязного списка

== сравнит ссылки на строки, не содержимое

