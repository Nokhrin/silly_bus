# Инкапсуляция, private, protected... какая польза и как тестировать инкапсулированное поведение

инкапсуляция - гарантия соблюдения требований к состоянию и поведению


связывание данных со множеством операций допустимых над этими данными 
с предоставлением доступа по заданному интерфейсу, который гарантирует соблюдение требований к состоянию и поведению

пример java

историческая проблема - обращение к одному и тому же значению из разных точек кода
каждое такое обращение требовало реализовать проверку корректности манипуляции над значением

дублировался проверочный однотипный код, не было единой точки контроля над состоянием объекта / значением переменной

изменение требований -> экспоненциальный рост точек отказа

пример java размазанного обращения


меха6изм решения - скрыть поля -> запретить чтение и запись напрямую
чтение и запись выполнять методами, объявленными в интерфейсе
задача - предикат над состоянием истинен до и после операции, вызов операции производит наблюдаемый эффект


все варианты реализации замкнутого множества операций

количество точек модификации * количество требований -> выигрыш инкапсуляции

инкапсуляция с наследованием

инкапсуляция без наследования

сокрытие с инкапсуляцией
сокрытие без инкапсуляции


инкапсуляция - механизм гарантии, не гарантия

